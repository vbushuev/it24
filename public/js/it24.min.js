var $jscomp={scope:{},findInternal:function(a,b,e){a instanceof String&&(a=String(a));for(var c=a.length,d=0;d<c;d++){var g=a[d];if(b.call(e,g,d,a))return{i:d,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,e,c){if(b){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var d=a[c];d in e||(e[d]={});e=e[d]}a=a[a.length-1];c=e[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");
var priceNumber=function(a){var b=null==a?0:a,e=b.toString().split(/\./),c="";if(1E3<=a){a=e[0].split("").reverse();var b=3,d;for(d in a)c+=a[d],0>=--b&&(c+=" ",b=3);b=c.split("").reverse().join("")+"."+e[1]}return b+"&#8381;"},periodTranslate=function(a){switch(a){case 1440:case "1440":a="\u0420\u0430\u0437 \u0432 \u0434\u0435\u043d\u044c";break;case 240:case "240":a="\u041a\u0430\u0436\u0434\u044b\u0435 4 \u0447\u0430\u0441\u0430";break;case 120:case "120":a="\u041a\u0430\u0436\u0434\u044b\u0435 2 \u0447\u0430\u0441\u0430";
break;case 60:case "60":a="\u041a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441";break;case 30:case "30":a="\u041a\u0430\u0436\u0434\u044b\u0435 \u043f\u043e\u043b\u0447\u0430\u0441\u0430"}return a},barcodeDraw=function(a){if("0"==a||0==a)return"";var b={},e="",c=a.split(""),d="";b["0"]="bwbwwwbbbwbbbwbw";b["1"]="bbbwbwwwbwbwbbbw";b["2"]="bwbbbwwwbwbwbbbw";b["3"]="bbbwbbbwwwbwbwbw";b["4"]="bwbwwwbbbwbwbbbw";b["5"]="bbbwbwwwbbbwbwbw";b["6"]="bwbbbwwwbbbwbwbw";b["7"]="bwbwwwbwbbbwbbbw";b["8"]="bbbwbwwwbwbbbwbw";
b["9"]="bwbbbwwwbwbbbwbw";b.A="bbbwbwbwwwbwbbbw";b.B="bwbbbwbwwwbwbbbw";b.C="bbbwbbbwbwwwbwbw";b.D="bwbwbbbwwwbwbbbw";b.E="bbbwbwbbbwwwbwbw";b.F="bwbbbwbbbwwwbwbw";b.G="bwbwbwwwbbbwbbbw";b.H="bbbwbwbwwwbbbwbw";b.I="bwbbbwbwwwbbbwbw";b.J="bwbwbbbwwwbbbwbw";b.K="bbbwbwbwbwwwbbbw";b.L="bwbbbwbwbwwwbbbw";b.M="bbbwbbbwbwbwwwbw";b.N="bwbwbbbwbwwwbbbw";b.O="bbbwbwbbbwbwwwbw";b.P="bwbbbwbbbwbwwwbw";b.Q="bwbwbwbbbwwwbbbw";b.R="bbbwbwbwbbbwwwbw";b.S="bwbbbwbwbbbwwwbw";b.T="bwbwbbbwbbbwwwbw";b.U="bbbwwwbwbwbwbbbw";
b.V="bwwwbbbwbwbwbbbw";b.W="bbbwwwbbbwbwbwbw";b.X="bwwwbwbbbwbwbbbw";b.Y="bbbwwwbwbbbwbwbw";b.Z="bwwwbbbwbbbwbwbw";b["-"]="bwwwbwbwbbbwbbbw";b["."]="bbbwwwbwbwbbbwbw";b[" "]="bwwwbbbwbwbbbwbw";b["*"]="bwwwbwbbbwbbbwbw";b.$="bwwwbwwwbwwwbwbw";b["/"]="bwwwbwwwbwbwwwbw";b["+"]="bwwwbwbwwwbwwwbw";b["%"]="bwbwwwbwwwbwwwbw";for(var g in c)d+=b[c[g]];console.debug(a+" => "+d);bc_c=d.split("");for(g in bc_c)"b"==bc_c[g]&&(e+='<line x1="'+1*g+'" y1="0" x2="'+1*g+'" y2="48" style="stroke:rgb(0,0,0);stroke-width:1" />'),
0==g%16&&(e+='<text x="'+(6+g/16*16)+'" y="64" fill="black">'+c[g/16]+"</text>");return e='<svg height="80" width="'+16*c.length+'">'+e+"</svg>"},page={noscroll:!1,filters:{data:{f:0,l:24,s:"",brand_id:"",supply_id:"",catalog_id:[]},search:function(a){a=a.val();3<a.length&&(page.filters.data.f=0,page.filters.data.s=a,page.load())},searchName:function(a){a=a.val();3<a.length&&(page.filters.data.f=0,page.filters.data.n=a,page.load())},clear:function(){var a=arguments.length?Array.isArray(arguments[0])?
arguments[0]:[arguments[0]]:[];if(a.length)for(var b in a)"catalog_id"==a[b]?($(".filter-check").removeAttr("checked"),this.data[a[b]]=[]):this.data[a[b]]="";else for(a in this.data)this.data[a]="";this.data.f=0;this.data.l=24;page.load()},filter:{brands:function(){filters.data.f=0;filters.data.brand_id=arguments.length?arguments[0]:"";page.load()},error:function(){page.filters.data.f=0;page.filters.data.error=1==page.filters.data.error?0:1;page.load()},catalogs:function(){var a=arguments.length?
arguments[0]:"",b="undefined"!=typeof $(a).attr("checked");page.filters.data.catalog_id="undefined"==typeof page.filters.data.catalog_id?[]:page.filters.data.catalog_id;Array.isArray(page.filters.data.catalog_id)||(page.filters.data.catalog_id=[]);b?($(a).removeAttr("checked"),delete page.filters.data.catalog_id[$(a).parent().attr("data-id")],page.filters.data.catalog_id.splice(page.filters.data.catalog_id.indexOf($(a).parent().attr("data-id")),1)):($(a).attr("checked","checked"),page.filters.data.catalog_id.push($(a).parent().attr("data-id")));
$(a).parent().find("ul.dropdown-menu li").each(function(){b?(page.filters.data.catalog_id.splice(page.filters.data.catalog_id.indexOf($(this).attr("data-id")),1),$(this).find(".filter-check").removeAttr("checked")):(page.filters.data.catalog_id.push($(this).attr("data-id")),$(this).find(".filter-check").attr("checked","checked"))});console.debug(page.filters.data.catalog_id);page.filters.data.f=0;page.load()}},get:{all:function(){page.filters.get.roles();page.filters.get.brands();page.filters.get.suppliers();
page.filters.get.catalogs();console.debug("#jscontent trigger it24:filters-loaded");$("#jscontent").trigger("it24:filters-loaded")},roles:function(){var a=$(".roles").next("ul.dropdown-menu"),b=$(".role").next("ul.dropdown-menu");0==a.length&&0==b.length||$.ajax({url:"/data/roles",type:"GET",dataType:"json",success:function(e){for(var c=0;c<e.length;++c){var d=e[c];store.roles[d.code]=d.title;a.append("<li><a href=\"javascript:{page.filters.data.f=0;page.filters.data.role='"+d.code+"';page.load();}\">"+
(d.title.length?d.title:"noname")+"</a></li>");b.append("<li><a href=\"javascript:{$('input[name=role]').val('"+d.code+"');$('input[name=roleName]').val('"+d.title+"');}\">"+(d.title.length?d.title:"noname")+"</a></li>")}}})},brands:function(a){var b=$(".brands").next("ul.dropdown-menu");0!=b.length&&$.ajax({url:"/data/brands",type:"GET",dataType:"json",success:function(a){for(var c=0;c<a.length;++c){var d=a[c];b.append('<li><a href="javascript:{page.filters.data.f=0;page.filters.data.brand_id='+
d.id+';page.load();}">'+(d.title.length?d.title:"noname")+"</a></li>")}}})},suppliers:function(a){var b=$(".suppliers").next("ul.dropdown-menu");0!=b.length&&$.ajax({url:"/data/suppliers",type:"GET",dataType:"json",success:function(a){for(var c=0;c<a.length;++c){var d=a[c];b.append('<li><a href="javascript:{page.filters.data.f=0;page.filters.data.supply_id='+d.id+';page.load();}">'+d.title+"</a></li>")}}})},catalogs:function(a){var b=$(".catalogs").next("ul.dropdown-menu"),e=function(a){var b="",
c;for(c in a){var f=a[c];store.catalogs[f.id]=f.title;b+='<li data-id="'+f.id+'" class="catalog-id'+(Array.isArray(f.childs)?"":" dropdown-submenu")+'">';b+='<input class="filter-check" type="checkbox" onchange="{page.filters.filter.catalogs(this);}"/>';b+='<a href="javascript:0" data-id="'+f.id+'" id="'+f.id+'" class="submenu'+(Array.isArray(f.childs)?"":' dropdown-toggle" data-toggle="dropdown" aria-expanded="false')+'">'+f.title+"</a>";Array.isArray(f.childs)||(b+='<ul class="dropdown-menu">',
b+=e(f.childs),b+="</ul>");b+="</li>"}return b};0!=b.length&&$.ajax({url:"/data/catalogs",type:"GET",dataType:"json",success:function(a){store.catalogs={};for(var d in a){var c=a[d],f="";store.catalogs[c.id]=c.title;f+='<li data-id="'+c.id+'" '+(Array.isArray(c.childs)?"":'class="dropdown-submenu"')+">";f+='<input class="filter-check" type="checkbox" onchange="{page.filters.filter.catalogs(this);}"/>';f+='<a href="javascript:0" data-id="'+c.id+'" id="'+c.id+'" class="catalogs submenu'+(Array.isArray(c.childs)?
"":' dropdown-toggle" data-toggle="dropdown" aria-expanded="false')+'">'+c.title+"</a>";Array.isArray(c.childs)||(f+='<ul class="dropdown-menu">',f+=e(c.childs),f+="</ul>");f+="</li>";b.append(f)}}})}}},refresh:function(){page.filters.clear();page.load()},reload:function(){page.filters.data.f-=page.filters.data.l;page.filters.data.f=page.filters.data.f<page.filters.data.l?0:page.filters.data.f;page.load()},load:function(){console.debug("loading page with data from "+$("#js-container").attr("data-ref"));
$.ajax({url:$("#js-container").attr("data-ref"),type:"GET",data:page.filters.data,dataType:"json",beforeSend:function(){page.filters.data.f||$("#js-container").html("")},success:function(a){"undefined"!=typeof _contentLoader&&_contentLoader(a)},complete:function(){lock=!1}})},submit:function(){if(arguments.length){var a=arguments[0],b={};$(a.form+" input").each(function(){var a=$(this).val();b[$(this).attr("name")]=a});console.debug(b);$.ajax({url:$(a.form).attr("data-rel"),dataType:"json",data:b,
success:function(b){console.debug(b);$(a.form).modal("hide");document.location.reload()}})}}},store={roles:{},catalogs:null};$(document).ready(function(){page.filters.get.all();$(window).scroll(function(){!page.noscroll&&$(window).height()+$(window).scrollTop()+300>=$(document).height()&&!lock&&(lock=!0,page.load())});page.load();$("#jscontent").on("it24:filters-loaded",function(){console.debug("it24:filters-loaded")})});
